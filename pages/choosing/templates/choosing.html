<!DOCTYPE html>
 <html>
    <head>
        <title>Experiment</title>
        <link rel="icon" href="{{ url_for('static', filename='media/bgu_circle.png') }}"/>
        <link rel="stylesheet" href="{{ url_for('choosing.static', filename='choosing.css') }}"/>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}"/>
        <script type="text/javascript" src="{{ url_for('choosing.static', filename='choosing.js') }}"></script>

        <!-- for transferring data from JS to Flask -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="{{url_for('static', filename='jquery.js') }}">\x3C/script>')</script>
        <script type=text/javascript>
            $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
        </script>

        <!-- for mobile: -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    </head>

    <body class="grid-container" onload="scrollUp()">
        <script type=text/javascript>
              function connectJStoFlask(choseRec,id,num_of_clicks) {
                  $.getJSON($SCRIPT_ROOT + '/insertUserChoices', {
                    choseRec: choseRec,
                    id: id,
                    num_of_clicks: num_of_clicks
                }, function(data) {
                      $("#result").text(data.result);
                });
                return false;
              };
        </script>
        <div class="header">
            <h1>Please choose one vacation-deal:</h1>
            <!-- Trigger/Open The Modal -->
            <button id="myBtn">Click here for recommendations</button>

            <!-- The Modal -->
            <div id="myModal" class="modal" style= "display: block"> <!--IF I WANT THE RECOMM WINDOW TO POP UP WHEN PAGE LOADS FOR THE FIRST TIME, ADD: style= "display: block"-->

                <!-- Modal content -->
                <div class="modal-content grid-container-modal">
                    <!--<span class="close">&times;</span>-->     <!--the X button of the modal!-->
                    <div class="modal_header"><b style="color: orange; font-size: larger;">Recommended for you:</b>
                    </div><br>
                    <div class="modal_options">
                        {% for vacation in recomm_list %}
                            <div id='-1' class="deal recomm" onclick="userChoice(id)">
                                <p>{{ vacation[2] }} in {{ vacation[1] }}, in a {{ vacation[3] }}</p>
                            </div>
                        {% endfor %}
                    </div><br>
                    <div class="close"><p>view more options</p></div>
                </div>

            </div>
        </div>
        <div class="options">
            <!-- need to add: choosing the correct set for the user -->
            {% for vacation in vacation_list %}
                <div id='{{ vacation[0] }}' class="deal" onclick="userChoice(id)">
                    <p>{{ vacation[2] }} in {{ vacation[1] }}, in a {{ vacation[3] }}</p>
                </div>
            {% endfor %}
        </div>
        

        <script> //CANNOT MOVE SCRIPT TO ANOTHER FILE
            var modal = document.getElementById("myModal"); // Get the modal
            var btn = document.getElementById("myBtn"); // Get the button that opens the modal
            var span = document.getElementsByClassName("close")[0]; // Get the <span> element that closes the modal
            var num_of_clicks = 0; //the number of times the user clicks on the recommendation button

            // When the user clicks the button, open the modal 
            btn.onclick = function() {
              modal.style.display = "block";
              num_of_clicks++;
            }
            
            // When the user clicks on <span> (x), close the modal
            span.onclick = function() {
              modal.style.display = "none";
            }
            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
              if (event.target == modal) {
                modal.style.display = "none";
              }
            }
        </script>

    </body>
</html>